<neu>

<script src="https://purpos.web.app/ui/sen.js"></script>
<script setup>
setSEO("Search"); setViewport(); ui();
</script>
<body>
<cont bar top none tbr="0" bbg> <p> Search </p> </cont>
  <cont small none></cont>
<cont bar bottom none bbg bbdr="0" fixed>
<textarea id="searchInput" placeholder="Enter your query"></textarea>
<a onmousedown="searchWikipedia()">
  <i m class="fa-arrow-up fa-solid"></i>
</a>
</cont>
  
<cont scroll big id="result"></cont>


<script>

const searchWikipedia = async () => {

  const query = document.getElementById('searchInput').value;

  const url = `https://en.wikipedia.org/w/api.php?action=query&format=json&prop=extracts&titles=${encodeURIComponent(query)}&exintro&explaintext&origin=*`;

  try {

    const response = await fetch(url);

    const data = await response.json();

    

    const pages = data.query.pages;

    const resultContainer = document.getElementById('result');



    

    while (resultContainer.firstChild) {

      resultContainer.removeChild(resultContainer.firstChild);

    }

    for (const pageId in pages) {

      const page = pages[pageId];

      if (page.extract) {

        const div = document.createElement('div');

        const h3 = document.createElement('h3');

        const p = document.createElement('p');

        h3.textContent = page.title;

        p.textContent = page.extract;


        div.appendChild(h3);

        div.appendChild(formatText(page.extract));

        resultContainer.appendChild(div);

      }

    }

  } catch (error) {

    console.error('Error:', error);

  }

};

const formatText = (text) => {

  const lines = text.split('\n');

  const fragment = document.createDocumentFragment();

  lines.forEach(line => {

    if (line.match(/^\d+\./)) {



      const ol = document.createElement('ol');

      const li = document.createElement('li');

      li.textContent = line;

      ol.appendChild(li);

      fragment.appendChild(ol);

    } else if (line.startsWith('â€¢')) {

      const ul = document.createElement('ul');

      const li = document.createElement('li');

      li.textContent = line;


      ul.appendChild(li);

      fragment.appendChild(ul);

    } else {

      const p = document.createElement('p');

      p.textContent = line;

      fragment.appendChild(p);

    }

  });

  return fragment;

};

</script>

</body>

</neu>
